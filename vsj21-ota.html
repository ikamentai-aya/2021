<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="太田　彩 (東京工業大学），脇田　建（東京工業大学）" />
  <title>小説内の動的人物相関図を用いた読書の支援</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
  <link rel="stylesheet" href="etc/page.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title"><p>小説内の動的人物相関図を用いた読書の支援</p></h1>
<p class="author">太田　彩 (東京工業大学），脇田　建（東京工業大学）</p>
</header>
<p>An Example of the Manuscript for<br />
the Visualization Symposium Japan (Times New Roman 16pt)</p>
<p>―Subtitle (Times New Roman 14pt)―</p>
<p>Taro KASHIKA and Hanako JOHO</p>
<h5 class="af1" id="abstract">ABSTRACT</h5>
<!--

This template is a guide to prepare manuscript for Visualization
Symposium Japan. Here, please write the abstract serving as an index and
as a summary of the present paper. It should be as long as approximately
150 words. \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
-->
<p>Books are reliable and excellent sources of information. However, reading requires long time constraints and the need to supplement the information from the text. Therefore, even if you have the desire and need to read, you may give up. For this reason, researches have been conducted to automatically extract information from novels and to assist the reader by representing the content of the story in a single page. However, there is a risk of spoiling. In this study, we propose a method to support reading by presenting a character correlation. In order to reduce the risk of spoilers, we propose a character correlation chart that changes as the reading progresses. We used two methods to add information: automatic extraction using natural language processing techniques and manual addition. In addition, by sharing the input information with others, we were able to reduce the time and effort required to input information. In order to verify the effectiveness of the proposed method, we constructed a reading support system using Aozora Bunko data. Finally, we discussed the degree of achievement and issues in comparison with the objectives.</p>
<!--
書籍は信頼性が高く優秀な情報源である。しかし読書は長い拘束時間を必要とし、文章から情報を補完する必要がある。そのため意欲や必要性があっても中断してしまうことがある。 そのため小説から情報を自動抽出したり、話の内容を一枚で表して補助を行う研究がなされてきた。しかし一枚で表すことによるネタバレの危険性が存在した。
本研究では人物相関図を提示することで読書をサポートする。提案手法ではネタバレの危険性を軽減するために、読書の進度に合わせて変化する人物相関図を提案する。自然言語処理の技術を用いた自動抽出と手動の追加のふた通りで情報の追加を行った。加えて他者と入力情報を共有することで情報入力の手間の削減、読書体験 の共有を実現した。提案手法の有効性を検証するために、青空文庫のデータを用いた読書支援システムを構築した。最後に目的と照らし合わせ達成度と課題について議論を行った。
\*\*\*\*\*\*\*\*《150語程度の英文ABSTRACT及び5語以下のKeywordsを記入してください．文字の大きさは10pt，字体はCentury，行間は１行分
(シングルスペース) です．》
-->
<p>Keywords: Visualization, Digital image processing, <!--
\*\*\<5語以下\>\*\*, \*\*\*\*\*, \*\*\*\*\*
--></p>
<!--

# 序　論

本原稿は，可視化情報シンポジウムの原稿テンプレートです．原稿執筆にはこのテンプレートをご使用ください．原稿サイズはA4版とし，ページ数は任意ですがファイルサイズは5MB以下としてください．ページ余白は，上25mm，左20mm，右20mm，下20mmとし，ヘッダーおよびフッダーは入れず，表題は3行目から始めてください．

# 文字及び改行

## 文字の大きさと改行

使用言語は日本語または英語とします．和文原稿の場合，題目，著者名，所属を和文で書き，続けて題目，著者名の英文名を記入してください．英文原稿の場合，題目，著者名の英文名を記入してください．なお，[和題・英題は講演申込時と同じであることが必要です]{.underline}
(異なる場合，プログラムや講演論文集の目次には講演申込時の題目が使用されます)．

著者名は11pt，1行に36字以内で右寄せとし，これを越える場合は改行してください．本文は9ptの2段組みとし，片側25字×50行，段間は10mmを基準としてください．章間の行間は2行分
(ダブルスペース)
とし，その中央に章名を10ptで記し，節間は行を空けないようにしてください．

## 字　体

題名，章・節名はゴシック体，本文は明朝体，英文題名，著者名はTimes New
Roman, 本文中の英文はCenturyとします.参考文献^1)^ は8ptで表記ください．

- *強調*

- **とても強調**

# 図　表

本文中の図表の表記には，下記Fig.1と Table
1のように，図表には通し番号をふり，図表番号はゴシック体，図表題はCenturyで書きます．キャプションは表の場合は上部に，図の場合は下部に記し，説明文は英文で表記してください．

  : Table 1: Sample of table

  Table            | Table
  :--------------- | :---------------
  1                | 2

表 [Sample of table] を参照のこと。

![Figure 1: PacificVis PC meeting](md/pvis-party.jpg)

# 原稿提出

本テンプレートで作成した講演原稿 (PDF形式) と，調査票
(PDF形式，必ず押印したものをお願いします)
をシンポジウムHPの案内に従って提出して下さい．

# 数式

二点$\mathbf p, \mathbf {p'}$を結ぶふたつの制御点列$\mathbb{e}$と$\mathbb {e'}$について。。。

`macros.tex` に定義したようなTeXマクロにも対応しています。

二点$\v p, \v \pp$を結ぶふたつの制御点列$\E e$と$\E \ep$について。。。

以上で定義した三つの指標がいずれも一定値以上出会った場合に限り，束化圧があるものと評価する．このことは閾値 ($\theta_a, \theta_l, \theta_p$) を用いて以下のように定式化される：

$\Cae, \Cae, \Cle$

$$
C(\E e, \E \ep) =
\begin {cases}
\Cae \Cpe \Cle & \Cae > \theta_a \text { かつ } \\
               & \Cpe > \theta_p \text { かつ } \\
               & \Cle > \theta_l \\
0              & \text {その他の場合}
\end{cases}
$$

$$\begin {align}
F_{\v e_i} =
  & - \sum_{\v e'_i \neq \v e_i} C(P^{-1}\E e_i, P^{-1}\E e'_i)\frac{\v e_i- \v{e'}_i}{(|\v e_i-\v e'_i| + \alpha)^2} \\
  & -k\left(|{\v e_i} - \v e_{i-1}| - \ell_{\E e}\right)\frac{\v e_i - \v e_{i-1}}{|\v e_i - \v e_{i-1}|} \\
  & -k\left(|\v e_i - \v e_{i+1}| - \ell_{\E e}\right)\frac{\v e_i - \v e_{i+1}}{|\v e_i - \v e_{i+1}|}
\end {align}
$$

$$\begin {align}
C^{\text {High}}(\E x, \E {x'}) & = \\
& \begin {cases}
\Cax \Clx \Cpx & \text {※ 束化圧が高い場合} \\
0 & \text {その他の場合}
\end {cases} \\
\text {ただし、※の条件は} \\
    \Cax > \theta_a \text { \& }
    \Clx > \theta_l \text { \& }
    \Cpx > \theta_p
\end {align}$$

# その他

## 文献の引用

この例題では、`library.bib` 文献データベースとし、文献引用のスタイルにシカゴスタイルを指定して文献リストと文献の引用をしている。`.csl`ファイルを別のものに指定すれば、他の引用形式にも対応できる。文献の引用方法は LaTeX の `\cite {...}` コマンドとは異なる。以下を参考にすること。


[@kashika-1997-visualization-technique; @kashika-1999-an-example-of-the-manuscript-for-vsj-journal] は英語の文献で[@kashika-1999-a-japanese-example-of-the-manuscript-for-vsj-journal]は日本語の文献である.
-->
<h1 id="はじめに書きおわり">はじめに（書きおわり）</h1>
<h2 id="背景">背景</h2>
<p>読書はメジャーな趣味の一つであり、信頼性の高い優秀な情報源でもある。しかし近年インターネットの普及により読書を習慣的に行う人と全く読書をしない人に二極化してきた。実際に全国大学生活協同組合連合会が大学生を対象に行った第 55 回学生生活実態調査 概要報告<!--*1-->によると、一日の読書時間が0時間である人が 48.1 %、その一方で毎日平均して 1時間以上読書を行っている人は26.8%であった。世の中では読書の効用を訴える書籍が数多く出版されており、読書する意欲はあるが実行に至らないという人々も存在する。その原因を推測すると、文字のみから内容を理解するという性質が他の情報入手媒体に比べて煩わしく感じやすいという点や、日々の忙しさから読書の時間が断片化し内容を思い出すための労力がかかるという場合が考えられる。</p>
<p>これまでにも自然言語処理の技術を使って読書の補助を行うという研究はされてきた。 本文から自動で登場人物や人物間の関係性を自動で抽出しユーザーに提示するものもあった。しかし小説全体に出てくる人物と関係性を抽出するので、まだ読んでいない部分の情報を意図せず獲得し小説による感動が薄れてしまう（＝<strong>ネタバレ</strong>）可能性があった。そのため、小説内の情報を一枚の絵で表すのではなく、ユーザーによって取得する情報の範囲を決めてもらう必要がある。また日本語の構造上暗に示された関係などは抽出することができず、抽出した情報に不足が出てしまうという問題もある。そのため情報抽出の方法を工夫する必要がある。 また、小説を対象とした可視化研究も行われてきた。しかしそれらの研究の多くは文学者が小説を分析するためのツールなどであり、一般の読者の理解を促進するものではなかった。そこで関係性の内容を詳しく記述したり全体の話の流れが一目でわかるようにするなど、読書に特化した構成を行う必要がある。これらの問題に着目し読書の補助に特化した可視化手法というのは今までに提案されてこなかった。そこで本研究では本の内容を読者に提示することで読書の補助を行う手法を提案する。</p>
<h2 id="アプローチ">アプローチ</h2>
<p>本研究では<strong>読書の進度に合わせて内容が変化する人物相関図</strong>を提案する。人々は読書をするときに、ページをめくることで読み進める。本研究では現在読んでいるページまでに出てきた登場人物・関係を表すこととで、ネタバレのない可視化を実現する。加えて人物相関図を作成するために必要な登場人物と関係性の情報は計算機による自動抽出と人間による手作業の二通りで行う。計算機により自動抽出することでユーザーの情報追加の労力を大幅に削減する。また人間が足りない情報の追加・情報の修正を行うことで高い精度の登場人物抽出と、繊細な関係の描写を実現する。しかし新しい小説を読むたびに情報を個人で修正することは作業量が多く現実的では無い。また同じ小説を読む人にとって登場人物や関係性の情報は共通であるということができる。そのため登場人物や関係の情報を他者と共有し、個人の作業量の削減、読書体験の共有を行う。本研究では以上の手法を提案し、1.1 で述べた問題を解決したいと考える。</p>
<h2 id="貢献">貢献</h2>
<p>読書を支援するために小説の内容を表す研究は以前にも行われてきた。それらの研究では人物相関図を一枚の絵で表したり、登場人物の時系列ごとの位置を図によって示してきた。 本研究の貢献はネタバレの可能性に着目し、<strong>読書の進度に合わせて内容が変化する人物相関図</strong>を提案したことである。読書の進度をページ数で管理し、現在のページまでに出てきた登場人物と関係性を人物相関図に表示した。以前にも小説の登場人物や関係を計算機によって自動抽出する研究は行われてきたが、本研究では日本語の曖昧性や登場人物の定義の曖昧性に着目し、人間と計算機が共同で情報を抽出する方法を提案した。加えて多数の人間が小説の情報を共有することで抽出の手間を削減させた。最後に提案手法を元に読書システム構築することができた。</p>
<h2 id="残りの構成">残りの構成</h2>
<p>本論文の以降の章では以下の議論を行う。２章では関連する研究についての紹介を行い、本研究の立ち位置を明らかにする。３章では提案手法の詳細の紹介と提案手法の効用を確認するためのシステムの要件定義を行う。４章では実際に構築したシステムの紹介を行う。５章では目標の達成度について議論を行い、今後の課題について言及したいと考える。</p>
<!--*1 https://www.univcoop.or.jp/press/life/report.html-->
<h1 id="関連研究書きおわり">関連研究(書きおわり)</h1>
<h2 id="小説からの情報抽出">小説からの情報抽出</h2>
<p>小説の内容を理解する上で<strong>登場人物の名前</strong>と<strong>人物間の関係</strong>は大切な要素である。そのため以前から小説からそれらの情報を抽出するための研究がなされてきた。米田<span class="citation" data-cites="米田崇明2012述語情報を利用した小説の登場人物の抽出">(米田崇明 et al. 2012)</span>では人物候補の<strong>局所出現性</strong>と<strong>述語情報</strong>を利用し、小説の本文から登場人物を自動抽出した。 西原<span class="citation" data-cites="西原弘真2015物語テキストを対象とした登場人物の関係抽出">(西原弘真 and 白井清昭 2015)</span>は辞書から手作業で作った関係辞書と、10 編の小説を元に人手で作ったパターンと半自動抽出して作ったパターンを元に、小説から関係性を抽出した。この研究では青空 文庫の小説 10 偏を対象に人手で抽出した関係性のうち、どれだけ多くの関係性を抽出できたか実験した。関係性の完全一致は適合率は 53.6 %、再現 率は 17.9 %、F 値は 26.8 %と、低い値が出ている。この値の低さの原因としては正しいパターン生成の難しさ、人物抽出の精度の低さなどがあげられている。</p>
<p>機械による自動抽出によって人手で抽出した情報と全く同じ情報を抽出することは難しい。加えて小説においてどこまでを登場人物や関係性として認識するかには議論の余地がある。例えばアガサクリスティーの「そして誰もいなくなった」では最初に兵隊島に関する記事について述べられた部分が存在する。その部分では兵隊島を新たに買った人物は誰かという議論が行われており、「ガブリエル・タール」や「若き貴公子 L 卿」など の人物の名前を挙げられている。しかしこれらの人物は物語の本筋に関係のない人物であり、このような重要度の低い人物を全て抽出することは逆に読みにくさを助長する可能性がある。また登場人物の飼い犬など人間でない動物が重要な働きをする場合も存在するが、動物を登場人物として扱うか否かを一概に決めることはできない。</p>
<p>以上の議論より読書の補助という目的において、全ての登場人物や関係性を計算機を用いて自動抽出することは得策ではないと考えた。そこで本研究では計算機による情報抽出に加えて、人間の手により情報の追加・修正を可能にすることにより、読書に有用な情報の提示を実現する。</p>
<!--しかし自然言語処理の技術だけを用いて正確な情報を抽出することは難しく、読者によって必要とする情報の範囲は異なる。-->
<h2 id="物語の内容の可視化">物語の内容の可視化</h2>
<p>物語の内容を一眼で理解したい、関係を図を用いて整理したいという願望は度々生じる。そのためテレビ番組や映画の内容を一枚の絵で表す研究は今までにも行われてきた。Filipovら<span class="citation" data-cites="filipovcircle">(Filipov et al., n.d.)</span>はテレビ番組「Game of Thrones」の中の84人の登場人物と216個の関係を放射状に配置することで一枚の絵で表した。Tanahashiら<span class="citation" data-cites="tanahashi2015efficient">(Tanahashi, Hsueh, and Ma 2015)</span>は時間と共に変化する映画内の登場人物の位置情報を複数の曲線を用いて表すアルゴリズムを提案した。以上の研究では物語の内容を一枚の絵で表しているが、まだ読んでいない部分の内容も意図せず知り読書の楽しみが損なわれてしまう恐れがある。本研究ではネタバレを防止しながら読者の理解を補助するために、<strong>読み進めた時点までの関係を表示するインタラクティブな可視化</strong>を提案する。</p>
<h2 id="文章に関する可視化">文章に関する可視化</h2>
<p>テキストに付随する情報をテキストに関連づけて表示する研究は行われてきた。Wuら<span class="citation" data-cites="wu2020interactive">(Wu, Zhao, and Amiruzzaman 2020)</span>では音声の長さや音声認識の信頼度などの情報をテキストに関連づけて可視化をし音声認識のサポートを行った。Johnら<span class="citation" data-cites="8781589">(John et al. 2019)</span>は文学者向けに登場人物の関係性の分析を可視化でサポートするシステムを提案した。本研究ではこれらの論文で採用されているいくつかの可視化手法を参考にしシステム設計を行う。</p>
<h1 id="提案手法書きおわり">提案手法（書きおわり）</h1>
<!--ユースケースを書いた方がいいのか？人物相関図に着想をえたヒントがない？-->
<p>読書をする際に読む意欲や必要性があっても、「登場人物が多すぎて覚えきれない」や「前回読んだ場所までの内容を忘れてしまった」などの理由から、意欲が下がり読書を断念してしまうことがある。本研究ではこれらの読書の意欲を下げる要因を<strong>読書の手間</strong>と名付ける。読書の手間とは具体的には以下のような例が挙げられる。</p>
<ul>
<li>前回読書をした時から時間が経ち内容を忘れてしまったので、また読み直す必要がある</li>
<li>ずっと前に読んだ本の内容が思い出せない</li>
<li>登場人物が多い/名前が複雑で覚えられrない</li>
<li>登場人物間の関係が覚えきれない/どこで出てきた関係なのか忘れてしまった</li>
</ul>
<p>これらの大半は記憶力を補助することで解決できると考え、本研究では小説の内容を可視化することで読書を支援することを決めた。手法を考える上で注目したのは<strong>人物相関図</strong>である。人物相関図とは物語内の登場人物や関係性をネットワークとして一枚の絵で表したものである。 人物相関図は映画やドラマの宣伝や紹介を行うために、よく公式サイトや広告などに用られている。加えて話数が多いアニメや小説において、登場人物や人物間の関係を整理して確認するためにも人物相関図は有効である。内容について理解を深めるために個人で相関図を作っている人もいる。 本研究では<strong>話の整理や表示に有効である</strong>という性質に着目し、人物相関図を用いることを決めた。</p>
<h2 id="実験">実験</h2>
<p>人物相関図を用いて読書を支援する手法を考える上で、実際に手書きで人物相関図を書きながら読書を行った。その際に３つの問題を発見することができた。1点目は<strong>一枚の絵で表すと重大なネタバレを生じてしまう</strong>という問題である。人物相関図に物語内の登場人物や人間関係を表示すると、物語内の展開上重要な情報を事前に知ってしまう可能性がある。そのため読書をしたときの驚きや感動などの新鮮な感情が阻害され、読書の楽しみを減らす恐れがある。2点目に<strong>人間関係の描写は複雑なものが多い</strong>ということである。 小説には<strong>親子</strong>や<strong>恋人</strong>など単語で言い表せる関係もあれば、<strong>〇〇さんの好きな人だと気づく</strong>など簡潔に言い表せないものも存在する。文学において繊細な感情の変化は重要な要素なので詳細な関係を記述し、それを人物相関図にて確認できなければならない。3点目は<strong>手書きで美しいレイアウトの人物相関図を描くことは難しいということ</strong>である。登場人物や人間関係の数が多い場合、それらを線の交差や婉曲が少なくなるようにレイアウトすることには非常に手間がかかる。加えて読書を進めながら人物相関図を書くと、読みやすい人物相関図を書くことのハードルは跳ね上がる。そのため読書の度に人間の手でレイアウトを行うことは現実的でない。以上の考察により提案手法の果たすべき小目標を以下のように設定した。</p>
<p>-（P1) 小説のどの部分を読んでいても、人物相関図によってネタバレを起こさないこと -（P2) 小説内の繊細な人間関係を記載し、ユーザーがそれを確認できること -（P3) 入力した情報をもとに人物相関図を自動でレイアウトしてくれること</p>
<h2 id="提案手法の概要">提案手法の概要</h2>
<p>3.1で設定した小目標をもとに提案手法の概要を紹介する。</p>
<p>(P1)の実現のために本研究では<strong>読書の進捗状況に応じて変化する人物相関図</strong>を提案する。小説内の登場人物と人間関係を動的ネットワークとして扱うために、登場人物や関係の出てきた位置をページ数で管理する。そして今まで読んできた中に登場した人物・関係のみを人物相関図に表示することでネタバレのない可視化を実現する。</p>
<p>(P2)の実現のために登場人物と人間関係の情報追加を手動と自動の２通りで実現した。自動抽出では独自のアルゴリズムにより登場人物を表す可能性の高い単語を抽出し、登場人物の共出現した文を関係として抽出した。手動での追加では登場人物と人間関係に関する様々な情報をユーザーの手によって登録する。</p>
<p>(P3)の実現のために人物相関図の自動レイアウトを行った。レイアウトに必要な情報は現在までのページに出てきた登場人物と関係のリストである。それらの情報をもとに<strong>人物相関図</strong>と<strong>人物相関表</strong>という２種類の表示を行う。人物相関表はノードリンクを用いたグラフで、各ノードは登場人物を表し各リンクは人間関係を表している。人物相関表は隣接行列を用いたグラフで、登場人物は縦と横の軸に並んでいる。関係は有向であると考え、関係の元の人物と行かつ関係の先の人物の列であるセルを着色することで表現する。</p>
<p>加えて本研究では<strong>読書体験を共有するために、提案手法では登場人物や関係の情報を共有する</strong>。そもそも登場人物のリストなどの読書に必要な情報は誰にとっても共通である。その情報を共有することで、新たに読む人は入力する手間を削減することができる。また、登場人物の間の関係は人によって受け取り方が異なることもあり、そこが議論の中心になることもある。 したがって関係を共有することで自身の細かい解釈についても人に伝えることができる。以上が提案手法の概要である。次の章では手法をもとにシステムの設計を行う。</p>
<h2 id="ユースケース">ユースケース</h2>
<p>具体的なシステムの使用方法について考えるために、以下のようなユースケースを設定した。</p>
<p>大学生の花子さんは友人の太郎さんから勧められてイワン ツルゲーネフの「はつ恋」を読むことにした。彼女は読書をあまりしないため、中々読み進めることができず、システムを使って読書をすることを決めた。まず、青空文庫のサイトで「はつ恋」の図書カードを開く。そしてそこからリンクをコピーしシステムに貼り付けて、システム上で「はつ恋」を読めるようにした。</p>
<p>花子さんは読み進めると1ページ目で3人のおじいさんが出てくることに気づいた。それらの人物を登場人物に追加したいので、登場人物の候補をシステムに提示させた。その結果様々な候補が出されたので、ハイライトされた部分を確認しながら人物を表す単語のみを追加した。そのまま読み進めると5ページ目に「背の高い少女」が出てきたのでその人物を追加する。この時追加したい人物は一人だけだったので手動で追加した。加えてウラジーミル・ペトローヴィチは6ページ目で背の高い少女と知り合いになりたいと思っているので、その関係情報を追加する。その後 12ページ目で少女の名前が「ジナイーダ」であることが判明したので、先ほど入力した「背の高い少女」の名前を「ジナイーダ」に変更する。その後も読み進めたが、途中でロシア人の名前がたくさん出てきて読むのに疲れてしまったため、中断することにした。</p>
<p>1週間後花子さんは前回読み終わったところから読書を再開することにした。しかし期間が空いたために、登場人物の名前を忘れてしまった。そこでシステムにおいて人物相関図を表示して、内容を思い出すことにした。人物相関図を見ると今までに出てきた登場人物の一覧を見ることができ、特に重要な人物が「ウラジーミル・ペトローヴィチ」と「ジナイーダ」であることが確認できた。その後読み進めていくと「ルーシン」という人物が出てきた。「ルーシン」が誰か思い出せなかったので、システム上で「ルーシン」が本文中のどこに出ているのか確認し、思い出すことができた。</p>
<p>友人の太郎さんにそのシステムを使っていることを話すと、太郎さんは小説の考察をすることが好きなので、システムを使って考察をまとめてみることにした。先に花子さんが登場人物の情報を加えてくれていたので、太郎さんは手軽に関係を追加することができた。また各々自分が関係だと思った情報を追加していき、二人とも最後まで本を読み情報を入力することができた。その後二人でシステムを見ながら感想を語り合うことにした。システムを見ることで二人の解釈の違いや、印象に残ったシーンを気軽に見つけることができた。このように花子さんと太郎さんは読書体験を楽しんだ。</p>
<h2 id="システムの要件設定">システムの要件設定</h2>
<p>ユースケースの内容からシステムの要件を以下のように定義した。</p>
<p>(N1) システムの上で読書ができること</p>
<p>(N2) 小説に関する重要な情報を手軽に追加できること</p>
<p>(N3) 情報を後から編集できること</p>
<p>(N4) 小説の進行度に合わせて関係図を表示すること</p>
<p>これらの要件を詳しく順番に確認していく。</p>
<h3 id="システムの上で読書ができること">システムの上で読書ができること</h3>
<p>この要件を設定した理由は主に２点存在する。1点目は読書における可視化の効果を高めるためである。読書をするスペースと可視化の画面が別れている場合、小説の本文と可視化を同時に確認することは難しく、可視化を見ることが負担になってしまう可能性がある。そのため読書スペースと可視化を同じシステム上で表示することでユーザーに積極的に可視化を活用してもらう。２点目は(N2)で定義した、情報の追加にかかる負担を削減するためである。読書の進度に合わせた可視化を行う上で「現在どこのページを読んでいるのか」や「登場人物や関係性がどこのページで出てきたか」などのページ数に関する情報は非常に重要である。しかしユーザーが読書を進めるたびにそれらの情報を提示してもらうことはあまり現実的ではない。そこでシステム上で読書をしてもらうことで自動的に現在のページ数を管理し、情報を追加してもらう際にも自動でページ数の情報を補足する。これらによってユーザーのシステム利用にかかる負担を削減する。以上がこの要件を設定した理由である。</p>
<h3 id="小説に関する重要な情報を手軽に追加できること">小説に関する重要な情報を手軽に追加できること</h3>
<p>２章において、小説における登場人物や関係性の認識は非常に曖昧であり機械による自動抽出が難しいことを議論した。そのため本研究では機械で抽出した情報を人間の手で修正し、小説の理解に適した登場人物と関係のリストを作成する手法を提案した。その手法を実現するためにシステムには<strong>小説の本文から情報を自動抽出する</strong>機能と<strong>人間による情報追加を可能にする</strong>機能の２つの機能が必要である。この機能を実装する上で最も重視すべき事項はこの機能がユーザーによって使いやすい機能であるかという点である。本研究の目的は<strong>読書を円滑にする</strong>ことであるため、情報の追加に手間取り読書を停滞させることは本意ではない。そのためなるべく少ない手順で情報を追加できるように機能の詳細を決定していく。</p>
<h3 id="情報を後から編集できること">情報を後から編集できること</h3>
<p>この機能は<strong>謝った情報を入力した</strong>とき、<strong>機械による自動抽出にミスが存在した</strong>とき、<strong>読書が進むうちに情報が変化した</strong>時などにおこる問題を解決するために必要である。システムを手動で操作したり、アルゴリズムで情報を自動抽出する時にミスが起こらないと考えることはできない。しかし誤った情報をそのまま保存しておくと映し出された人物相関図も誤った情報を含み、人物相関図を見ることで読解を阻害する可能性がある。そのため誤りを見つけた際には即座に修正できる必要がある。加えて小説は途中で情報が補完される場合がある。例えばユースケースにおいて序盤に出てきた「背の高い少女」は後に「ジナイーダ」という名前であることが判明した。名前が明かされた後、人物相関図における人名を表示を「背の高い少女」ではなく「ジナイーダ」に変えたいと思う場面も出てくるはずだ。そのためこの場合にもすでに入力した情報を修正できる必要がある。以上の理由から<strong>情報を後から修正できること</strong>をシステムの要件として設定した。その要件を達成するためにも、情報を追加するときと同様にユーザーが情報を修正しやすいような画面の配置、機能の設計が重要である。</p>
<h3 id="小説の進行度に合わせて関係図を表示すること">小説の進行度に合わせて関係図を表示すること</h3>
<p>この要件は（P1)と(P3)を達成するために非常に重要であり、この４つの中で最も大切な要件である。この節では可視化において対象となるデータと想定される動作や動機について考える。今回可視化に使用データは<strong>小説の本文</strong>と<strong>登場人物のリスト</strong>と<strong>人物関係のリスト</strong>と<strong>人物間の関係のリスト</strong>と<strong>登場人物のページごとの出現回数</strong>である。登場人物は<strong>名前</strong>という属性をもち、人物間の関係は<strong>誰から</strong>、<strong>誰への</strong>、<strong>どんな関係</strong>、<strong>好感度の値</strong>という属性をもち、両方共通で初めて登場したページ数を持つ。次にユースケースをもとに想定される動作を考える。ユースケースでは主に登場人物を追加するとき、内容を思い出すとき、特定の人物を思い出すとき、情報を修正するとき、二人で感想を話すときにシステム上で情報を確認していた。各シチュエーションにおいて必要な可視化要件を考える。登場人物を追加するときには<strong>機械によって抽出された単語の一覧</strong>と<strong>それらの単語が文中のどこに出てきたのかの表示</strong>が必要である。内容を思い出すときや二人で感想を話すときには<strong>関係の全体像を確認できること</strong>、<strong>人物と人物の間の関係が確認できること</strong>、<strong>1番重要な人物を見つけられること</strong>、<strong>時系列によって変化する関係図が眺められる</strong>などがあげられる。特定の人物を思い出すときにはその人に関する情報を収集するために<strong>人物を出てくる時間や関係する人物によって絞り込むことができる</strong>,<strong>特定の人物と関連する人物だけを取り出せる</strong>,<strong>特定の人物が登場するページを見つけられる</strong>などの絞り込み機能が必要である。情報を修正するときは(N3)に関わってくるが、<strong>現在の人物間の情報の一覧が確認できる</strong>ことが必要である。これらの細かい要件をもとに人物相関図など様々な可視化を実現する。</p>
<p>本章では簡単な実験をもとに、小目標を設定した。加えてその小目標をもとに提案手法の概観を紹介し、ユースケースからシステムの要件を設定した。４章においては実際のシステムについて詳しく説明を行う。</p>
<h1 id="可視化システム一旦書きおわり">可視化システム（一旦書きおわり）</h1>
<p>4.1にて設定した要件をもとにシステムを設計した。この節では要件に沿ってシステムの説明を行う。</p>
<h2 id="n1システムの上で読書ができること">(N1)システムの上で読書ができること</h2>
<p>様々な電子書籍リーダーを参考にし、読書に必要な機能を最低限実装した。読書画面には、小説の選択機能、本文の表示、しおりなどの機能が実装されている。<strong>小説を選択</strong>ボタンを押すと新しく小説を青空文庫のサイトからダウンロードするか、既にダウンロードした小説から選ぶのか選択することができる。小説をダウンロードする時は、青空文庫の作品の図書カードページのリンクを貼り付ける。貼り付けると、青空文庫のデータを表示しやすい形へ成形しシステム上に保存する。ダウンロード済みの作品を選ぶ際は、作品の一覧から自分の読みたい作品を選択する。選択された小説の本文はシステムの左下に表示され、 最初に読むときは１ページ目が、2回目以降に読む場合は前回最後に読んだページが表示される。元々の青空文庫で公開しているデータには区切りがないが、そのままシステム上に表示すると読んだ部分の把握が難しくなるので、一定文字数で区切りページとして管理している。 システムの上部には読書を進めるためのツールが位置している。左端のスライダーではつまみを動かして、見たいページを選択しそのページに飛ぶことができる。「◁」を押すと前のページへ、「▷」を押すと次のページへとめくることができる。次の「しおり」と書かれたボタンを押すと現在表示しているページをしおりづけできる。最後に「しおりに飛ぶ」ボタンを押すと、以前に追加したしおりのページを選択しそのページに飛ぶことができる。</p>
<h2 id="n2情報の追加方法">(N2)情報の追加方法</h2>
<p>この節では読んだ小説内の情報をシステムに追加する方法を紹介する。このシステムで入力できる情報はで議論した通り、登場人物と関係性の二つである。システム上で入力された情報はシステムを閉じても保存され続ける。情報追加は手動と自動の二通りで行えるので順番に紹介する。</p>
<h3 id="自動抽出">自動抽出</h3>
<p>自動抽出は<strong>自動情報抽出</strong>ボタンを押すことで、小説内の登場人物と人間関係の候補を自動で全て抽出することができる。抽出された情報は自動で保存され、その情報はシステム内で確認することができる。</p>
<h3 id="手動抽出">手動抽出</h3>
<p>登場人物の追加方法は主に二つである。一つ目の方法は完全に手作業で追加する方法である。1 番上の<strong>情報追加</strong>ボタンを押すと、人物を追加するか、関係を追加するか選ぶことができる。人物の追加を選ぶと、情報入力画面が出る。テキストボックスに追加したい登場人物を入力し、<strong>以上の人物を追加</strong>ボタンを押すと、入力した人物が登場人物のリストに追加される。二つ目の方法は計算機を用いて登場人物の候補を提案し、その中から人物を選んでもらう方法である。 <strong>登場人物の候補を抽出</strong>ボタンを押すと、現在表示している文章内の登場人物らしい単語を抽出して表示する。候補のうちチェックを付けたものは文中での色が変化するので、その単語が本当に登場人物を指すのか確認できる。最後に登場人物として追加したいものだけチェックをつけて、<strong>追加</strong>ボタンを押すとまとめて登場人物に追加される。</p>
<p>次に関係性の追加方法について紹介する。システムの上部の<strong>情報追加</strong>ボタンを押し、<strong>関係性追加</strong>を選択すると関係性の入力フォームが出現する。そこでその関係が<strong>誰から</strong>、<strong>誰への</strong>、<strong>どんな関係</strong>で<strong>どのくらい好意的なのか</strong>を入力する。好感度は５段階評価で高い値ほど好感度が高いことを示す。以上の情報を入力し終わったら<strong>追加</strong>ボタンを押すことで入力した関係性はシステムに保存される。</p>
<h2 id="n3-情報を後から編集できること">(N3) 情報を後から編集できること</h2>
<p>この節では既に追加した情報を修正する方法について紹介する。情報編集は<strong>情報編集画面</strong>を開くことで行うことができる。情報編集画面は<strong>登場人物編集表</strong>と<strong>登場人物の出現度のヒートマップ</strong>と<strong>関係編集画面</strong>の3つから成り立つ。登場人物の情報を編集する場合は表において変更したい部分をダブルクリックし直接書き換えることができる。しかし書き換えただけではシステムに保存された情報は変わらないので右にある<strong>変更を保存</strong>ボタンを押す必要がある。加えて登場人物の左横にチェックをつけると登場人物が選択され、選択された人物はヒートマップ上に表示される。右の<strong>消去</strong>ボタンを押すとチェック付きの人物をまとめて消去することができる。これは関係編集画面も同様に操作することができる。 ヒートマップにおいて縦軸は登場人物、横軸はページ数を表している。各セルはそのページにおいて登場人物の単語が何回出てきたかによって色分けされており、濃い色であるほど登場回数が多い。カーソルを各セル上におくと、そのセルが「誰のどのページでの出現回数」を表していて、正確な出現回数を確認することができる。加えて各セルをクリックするとそのセルの表すページへ飛ぶことができる。</p>
<h2 id="n4-小説の進行度に合わせて関係図を表示すること">(N4) 小説の進行度に合わせて関係図を表示すること</h2>
<p>最後に関係図を表示する機能について紹介する。本研究では登場人物と関係を表すために<strong>人物相関図</strong>と<strong>人物相関表</strong>という２種類の表示を行う。</p>
<h3 id="人物相関図">人物相関図</h3>
<p>人物相関図はノードリンクである。人物相関図は上の<strong>可視化を選択</strong>から<strong>人物相関図</strong>を選択することで表示できる 。人物相関図には現在のページまでに出てきた登場人物と関係の情報が表示される。各ノードは登場人物を表し、各リンクは1番直近の関係性を表している。各ノードの大きさはその人物の持つ関係性の多さを表し、大きいほど小説において重要な人物である。ノード上でクリックをするとそのノードに繋がったリンクのみが強調され、関係する人物を一眼で確認できる。加えて各リンクはその関係の持つ好感度の値によって色付けされている。各リンクの上をホバーすると関係についての正確な情報を得ることができる。人物相関図は登場人物が少ない場合に一目で重要な人物や関係性を確認することができ、多くのユーザーに馴染み深い表示手法を採用しているため内容を理解しやすいという利点がある。</p>
<h3 id="人物相関表">人物相関表</h3>
<p>次に人物相関表の紹介を行う。人物相関表はシステムの上部の<strong>可視化を選択</strong>から<strong>人物相関表</strong>を選ぶことで表示できる。人物相関表では現在のページまでに出てきた人物の名前が縦軸と横軸に並ぶ。各セルは縦軸の人物から横軸の人物への直近の関係を表しており、その関係の好感度によって色分けされている。またセル上をホバーすることでその関係の詳細を確認でき、クリックすることで過去の関係の一覧表を見ることができる。人物相関表の隣には表示する範囲を制限するためのボタンが位置する。これらのボタンでは、<strong>小説のどのページの関係を表示するのか</strong>、<strong>どの人物に注目した人物相関表を表示するのか</strong>、<strong>人物相関表にどの人物を表示するのか</strong>の３つを調整することができる。 人物相関表の機能は以上の通りである。人物相関表の長所は登場人物の多い長い小説に対しても、機能を使えばある程度対応することができることである。 このように人物相関図と人物相関表では長所が異なっているため、人物の数や知りたい情報によってビューを使い分けることを想定している。</p>
<h1 id="議論一旦書いた">議論（一旦書いた）</h1>
<p>この章では３章で定義した提案手法の果たすべき小目標を達成できているのか議論を行う。小目標は以下の通りであった。 -（P1) 小説のどの部分を読んでいても、人物相関図によってネタバレを起こさないこと -（P2) 小説内の繊細な人間関係を記載し、ユーザーがそれを確認できること -（P3) 入力した情報をもとに人物相関図を自動でレイアウトしてくれること</p>
<h2 id="p1-小説のどの部分を読んでいても人物相関図によってネタバレを起こさないこと">（P1) 小説のどの部分を読んでいても、人物相関図によってネタバレを起こさないこと</h2>
<p>本研究ではこの小目標を達成するために<strong>読書の進度によって変化する動的人物相関図</strong>を提案した。提案手法では登場人物や人物間の関係性は小説のページが進むにつれて登場しその後持続して存在するものとして扱う。そして現在表示しているページまでに出てきた登場人物と関係性を元に<strong>人物相関図</strong>と<strong>人物相関表</strong>という２種類の可視化を行う。これによりユーザーは表示するページ数の範囲を指定して人物相関図を表示することができ、ネタバレを受けずに書籍の内容を整理することができる。</p>
<p>課題点は2点ある。1点目はシステムの誤操作によって意図せずまだ読んでいない部分の情報を取得してしまう可能性があることである。今回人物相関図表示する内容は「現在表示しているページまでに出てきた情報」を表示しているため、スクロールバーの操作を間違えてまだ読んでいない部分を選択するとその時点までの登場人物と関係を人物相関図に表示してしまう。今後の課題としては意図しない表示が行われないための仕組み作りがあげられる。2点目は人物相関図に表示された登場人物からネタバレを起こす可能性がある点である。現在一人の登場人物に対し名前が一つ対応しており、それは何度でも修正することができる。加えて小説内の関係情報は他者と共有されているため、先に読んだ人が自分の読んだ内容に合わせて登場人物の名前を修正している場合、登場人物の真の名前が人物相関図に表示される可能性がある。登場人物の名前がわざと序盤において隠されていたり展開に大きく影響している場合があるため、登場人物の真の名前を知ることでネタバレにつながる可能性がある。そのため今後の課題として人物の名前を複数保存できるようにし、その名前がどこのページまで使われているのかを確認し、ネタバレが起こらないようにする。</p>
<h2 id="p2-小説内の繊細な人間関係を扱えること">（P2) 小説内の繊細な人間関係を扱えること</h2>
<p>この小目標を達成するためにシステムの要件として、本研究では計算機の自動抽出を人間の手によって補完する方法を提案した。またその手法を実現するためにシステムの要件として<strong>(N2) 小説に関する重要な情報を手軽に追加できること</strong>、<strong>(N3) 情報を後から編集できること</strong>を設定した。(N2)の達成のために小説ないの全ての登場人物と関係を自動抽出する機能と、人間の手によってそれらの情報を追加する機能を実装した。そのことにより機械による完全自動抽出に比べて小説にそった内容であり、人間による完全手動より少ない手間での情報の追加を実現させた。(N3)では情報編集画面を用意し、人間による情報修正をシステムによってサポートした。加えて登場人物の出現頻度のヒートマップを表示したことで、登場人物の出現する場面へ容易にアクセスできるようになり、情報の妥当性の検証のサポートを行った。以上よりシステムにおいて小説内の複雑な関係をシステム上で扱うことができるようになった。</p>
<p>現在の課題点は２点存在する。１点目は情報入力機能に必要な操作の数が多いことである。現在システム上で登場人物を入力するためには登場人物の名前を実際に打ち込むなど4ステップが必要である。情報追加ではその関係が誰か誰へのどんな関係か打ち込むなど7ステップが必要である。どちらも自分で文章を打ち込む必要がありユーザー側の負担が大きいため、本文上を選択して追加したり、情報の追加を何らかの形でアシストする必要がある。２点目は情報の自動抽出の精度に改善余地があることである。現在小説の本文から登場人物の自動抽出を行っているが、登場人物ではない物体も登場人物として抽出してしまうことがある。実際に宮沢賢治の「銀河鉄道の夜」に適用した際には物語に出てきたりんどうの花が「りんどう」として登場人物の中に抽出された。今後は抽出アルゴリズムを改良し抽出精度を向上させたい。</p>
<h2 id="p3-入力した情報をもとに人物相関図を自動でレイアウトしてくれそれを適切なタイミングで確認できること">（P3) 入力した情報をもとに人物相関図を自動でレイアウトしてくれ、それを適切なタイミングで確認できること</h2>
<p>この小目標を達成するために提案手法は<strong>人物相関図</strong>と<strong>人物相関表</strong>という二種類の図で現在のぺージまでの人物関係の表示を行った。どちらもシステムに保存された登場人物のリストと関係性のリストをもとに、人物相関図はノードリンクで人物相関表は隣接行列で表示した。これらの可視化は小説の本文の右側に配置され、読書をしながら確認でき、小説の内容を整理することができる。人物相関図はノードの大きさで登場人物の重要性を表現し、全体の構造を直感的に理解することができる。一方人物相関図はフィルタリング機能が豊富で、ページ数の範囲や登場人物のリストから人物相関表に映し出す範囲を絞り込むことができる。加えて２人の人物を選択することで、その二人の過去の関係も参照することができる。人物相関表を用いることで登場人物の多い小説でも関係の詳細を確認することができる。</p>
<p>一方課題点は２点存在する。１点目は<strong>人物相関図の時間変化が捉えにくい</strong>点である。現在人物相関図のレイアウトはページを移動するたびに再計算している。そのため人物や関係が大きく変わる時にレイアウトが大幅に変更され、構造の変更点を確認することが難しくなる。今後は動的ネットワークの既存アルゴリズムを参考にして、レイアウトの変化が少ないアルゴリズムを設計したい。２点目は登場人物の多い小説では人物相関図が複雑で認識にくくなる点である。登場人物が多いと線の交差は多く、個々の人物を表す頂点は小さくなってしまう。そうなると人物相関図の理解にかかる労力が増してしまう。今後は人物相関表に用いたフィルタリング機能を人物相関図にも適用したいと考える。</p>
<p>以上のように各小目標に対し解決策を考え、システムで必要な機能を実装することができた。今後は各小目標で述べた課題点を解決したいと考える。</p>
<h1 id="まとめ">まとめ</h1>
<!--もっと書く-->
<p>読書はメジャーな趣味であり信頼性の高い情報源だが、様々な理由から読書を断念してしまう人々が存在する。本研究では計算機による支援によって人々の読書が円滑に行えるように支援を行う。その上で人物相関図の<strong>物語の内容を整理するのに有効である</strong>点に着目し、人物相関図の提示によって読書を支援することを決めた。そして具体的な手法を考えるために実験を行い、ネタバレの危険性やレイアウトの難しさなど様々な問題を発見し、目的達成のための小目標を３つ設定した。その上で本研究では<strong>読書の進度によって変化する人物相関図</strong>を提示することで読書の支援を行う手法を提案した。提案手法の有効性を検証するために青空文庫で公開されている小説を関係図を確認し読み進められる読書システムを開発した。開発にあたりユースケースを考え、システムに必要な４つの用件を定義した。4つの要件とは具体的に<strong>(N1) システムの上で読書ができること</strong>、<strong>(N2) 小説に関する重要な情報を手軽に追加できること</strong>、<strong>(N3) 情報を後から編集できること</strong>、<strong>(N4) 小説の進行度に合わせて関係図を表示すること</strong>を設定した。(N1)の達成のために最低限の読書機能をつけ、(N2)の達成のために登場人物と関係性の追加を機械による自動抽出と手作業での追加の２通りで実現した。(N3)のためにユーザーが容易に情報を編集できる情報編集画面をつけ、(N4)のために人間関係を<strong>人物相関図</strong>と<strong>人物相関表</strong>という２種類の可視化で表現した。以上のように要件をもとにシステムを実装することができた。また議論において小目標ごとに振り返りを行い研究の達成度を確認することができた。</p>
<p>今後は６章で述べた課題の解決とシステムの評価を行う。本研究では小目標の達成度によってシステムの評価を行った。今後はユーザー実験など提案手法の有効性を評価するための実験を準備し、実行したいと考える。 <!--もっと書く--></p>
<h1 class="unnumbered" id="参-考-文-献">参　考　文　献</h1>
<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-filipovcircle" class="csl-entry" role="doc-biblioentry">
Filipov, Velitchko, Davide Ceneda, TU CVAST, Michael Koller, Alessio Arleo, and Silvia Miksch. n.d. <span>“The Circle of Thrones: Conveying the Story of Game of Thrones Using Radial Infographics.”</span>
</div>
<div id="ref-8781589" class="csl-entry" role="doc-biblioentry">
John, Markus, Martin Baumann, David Schuetz, Steffen Koch, and Thomas Ertl. 2019. <span>“A Visual Approach for the Comparative Analysis of Character Networks in Narrative Texts.”</span> In <em>2019 IEEE Pacific Visualization Symposium (PacificVis)</em>, 247–56. <a href="https://doi.org/10.1109/PacificVis.2019.00037">https://doi.org/10.1109/PacificVis.2019.00037</a>.
</div>
<div id="ref-tanahashi2015efficient" class="csl-entry" role="doc-biblioentry">
Tanahashi, Yuzuru, Chien-Hsin Hsueh, and Kwan-Liu Ma. 2015. <span>“An Efficient Framework for Generating Storyline Visualizations from Streaming Data.”</span> <em>IEEE Transactions on Visualization and Computer Graphics</em> 21 (6): 730–42.
</div>
<div id="ref-wu2020interactive" class="csl-entry" role="doc-biblioentry">
Wu, Tsung Heng, Ye Zhao, and Md Amiruzzaman. 2020. <span>“Interactive Visualization of AI-Based Speech Recognition Texts.”</span> <em>EuroVA</em>.
</div>
<div id="ref-米田崇明2012述語情報を利用した小説の登場人物の抽出" class="csl-entry" role="doc-biblioentry">
米田崇明, 篠崎隆宏, 堀内靖雄, and 黒岩眞吾. 2012. <span>“述語情報を利用した小説の登場人物の抽出.”</span> <em>言語処理学会第 18 回年次大会発表論文集</em> 18: 855–58.
</div>
<div id="ref-西原弘真2015物語テキストを対象とした登場人物の関係抽出" class="csl-entry" role="doc-biblioentry">
西原弘真, and 白井清昭. 2015. <span>“物語テキストを対象とした登場人物の関係抽出.”</span> <em>言語処理学会第 21 回年次大会発表論文集</em> 21: 628–31.
</div>
</div>
</body>
</html>
