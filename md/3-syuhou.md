# 提案手法（書きおわり）
<!--ユースケースを書いた方がいいのか？人物相関図に着想をえたヒントがない？-->
読書をする際に読む意欲や必要性があっても、「登場人物が多すぎて覚えきれない」や「前回読んだ場所までの内容を忘れてしまった」などの理由から、意欲が下がり読書を断念してしまうことがある。本研究ではこれらの読書の意欲を下げる要因を**読書の手間**と名付ける。読書の手間とは具体的には以下のような例が挙げられる。

- 前回読書をした時から時間が経ち内容を忘れてしまったので、また読み直す必要がある
- ずっと前に読んだ本の内容が思い出せない
- 登場人物が多い/名前が複雑で覚えられrない
- 登場人物間の関係が覚えきれない/どこで出てきた関係なのか忘れてしまった

これらの大半は記憶力を補助することで解決できると考え、本研究では小説の内容を可視化することで読書を支援することを決めた。手法を考える上で注目したのは**人物相関図**である。人物相関図とは物語内の登場人物や関係性をネットワークとして一枚の絵で表したものである。 人物相関図は映画やドラマの宣伝や紹介を行うために、よく公式サイトや広告などに用られている。加えて話数が多いアニメや小説において、登場人物や人物間の関係を整理して確認するためにも人物相関図は有効である。内容について理解を深めるために個人で相関図を作っている人もいる。 本研究では**話の整理や表示に有効である**という性質に着目し、人物相関図を用いることを決めた。


## 実験
人物相関図を用いて読書を支援する手法を考える上で、実際に手書きで人物相関図を書きながら読書を行った。その際に３つの問題を発見することができた。1点目は**一枚の絵で表すと重大なネタバレを生じてしまう**という問題である。人物相関図に物語内の登場人物や人間関係を表示すると、物語内の展開上重要な情報を事前に知ってしまう可能性がある。そのため読書をしたときの驚きや感動などの新鮮な感情が阻害され、読書の楽しみを減らす恐れがある。2点目に**人間関係の描写は複雑なものが多い**ということである。 小説には**親子**や**恋人**など単語で言い表せる関係もあれば、**〇〇さんの好きな人だと気づく**など簡潔に言い表せないものも存在する。文学において繊細な感情の変化は重要な要素なので詳細な関係を記述し、それを人物相関図にて確認できなければならない。3点目は**手書きで美しいレイアウトの人物相関図を描くことは難しいということ**である。登場人物や人間関係の数が多い場合、それらを線の交差や婉曲が少なくなるようにレイアウトすることには非常に手間がかかる。加えて読書を進めながら人物相関図を書くと、読みやすい人物相関図を書くことのハードルは跳ね上がる。そのため読書の度に人間の手でレイアウトを行うことは現実的でない。以上の考察により提案手法の果たすべき小目標を以下のように設定した。

-（P1) 小説のどの部分を読んでいても、人物相関図によってネタバレを起こさないこと
-（P2) 小説内の繊細な人間関係を記載し、ユーザーがそれを確認できること
-（P3) 入力した情報をもとに人物相関図を自動でレイアウトしてくれること

## 提案手法の概要
3.1で設定した小目標をもとに提案手法の概要を紹介する。

(P1)の実現のために本研究では**読書の進捗状況に応じて変化する人物相関図**を提案する。小説内の登場人物と人間関係を動的ネットワークとして扱うために、登場人物や関係の出てきた位置をページ数で管理する。そして今まで読んできた中に登場した人物・関係のみを人物相関図に表示することでネタバレのない可視化を実現する。

(P2)の実現のために登場人物と人間関係の情報追加を手動と自動の２通りで実現した。自動抽出では独自のアルゴリズムにより登場人物を表す可能性の高い単語を抽出し、登場人物の共出現した文を関係として抽出した。手動での追加では登場人物と人間関係に関する様々な情報をユーザーの手によって登録する。

(P3)の実現のために人物相関図の自動レイアウトを行った。レイアウトに必要な情報は現在までのページに出てきた登場人物と関係のリストである。それらの情報をもとに**人物相関図**と**人物相関表**という２種類の表示を行う。人物相関表はノードリンクを用いたグラフで、各ノードは登場人物を表し各リンクは人間関係を表している。人物相関表は隣接行列を用いたグラフで、登場人物は縦と横の軸に並んでいる。関係は有向であると考え、関係の元の人物と行かつ関係の先の人物の列であるセルを着色することで表現する。

加えて本研究では**読書体験を共有するために、提案手法では登場人物や関係の情報を共有する**。そもそも登場人物のリストなどの読書に必要な情報は誰にとっても共通である。その情報を共有することで、新たに読む人は入力する手間を削減することができる。また、登場人物の間の関係は人によって受け取り方が異なることもあり、そこが議論の中心になることもある。 したがって関係を共有することで自身の細かい解釈についても人に伝えることができる。以上が提案手法の概要である。次の章では手法をもとにシステムの設計を行う。


## ユースケース

具体的なシステムの使用方法について考えるために、以下のようなユースケースを設定した。

大学生の花子さんは友人の太郎さんから勧められてイワン ツルゲーネフの「はつ恋」を読むことにした。彼女は読書をあまりしないため、中々読み進めることができず、システムを使って読書をすることを決めた。まず、青空文庫のサイトで「はつ恋」の図書カードを開く。そしてそこからリンクをコピーしシステムに貼り付けて、システム上で「はつ恋」を読めるようにした。

花子さんは読み進めると1ページ目で3人のおじいさんが出てくることに気づいた。それらの人物を登場人物に追加したいので、登場人物の候補をシステムに提示させた。その結果様々な候補が出されたので、ハイライトされた部分を確認しながら人物を表す単語のみを追加した。そのまま読み進めると5ページ目に「背の高い少女」が出てきたのでその人物を追加する。この時追加したい人物は一人だけだったので手動で追加した。加えてウラジーミル・ペトローヴィチは6ページ目で背の高い少女と知り合いになりたいと思っているので、その関係情報を追加する。その後 12ページ目で少女の名前が「ジナイーダ」であることが判明したので、先ほど入力した「背の高い少女」の名前を「ジナイーダ」に変更する。その後も読み進めたが、途中でロシア人の名前がたくさん出てきて読むのに疲れてしまったため、中断することにした。

1週間後花子さんは前回読み終わったところから読書を再開することにした。しかし期間が空いたために、登場人物の名前を忘れてしまった。そこでシステムにおいて人物相関図を表示して、内容を思い出すことにした。人物相関図を見ると今までに出てきた登場人物の一覧を見ることができ、特に重要な人物が「ウラジーミル・ペトローヴィチ」と「ジナイーダ」であることが確認できた。その後読み進めていくと「ルーシン」という人物が出てきた。「ルーシン」が誰か思い出せなかったので、システム上で「ルーシン」が本文中のどこに出ているのか確認し、思い出すことができた。 

友人の太郎さんにそのシステムを使っていることを話すと、太郎さんは小説の考察をすることが好きなので、システムを使って考察をまとめてみることにした。先に花子さんが登場人物の情報を加えてくれていたので、太郎さんは手軽に関係を追加することができた。また各々自分が関係だと思った情報を追加していき、二人とも最後まで本を読み情報を入力することができた。その後二人でシステムを見ながら感想を語り合うことにした。システムを見ることで二人の解釈の違いや、印象に残ったシーンを気軽に見つけることができた。このように花子さんと太郎さんは読書体験を楽しんだ。

## システムの要件設定

ユースケースの内容からシステムの要件を以下のように定義した。

(N1) システムの上で読書ができること

(N2) 小説に関する重要な情報を手軽に追加できること

(N3) 情報を後から編集できること

(N4) 小説の進行度に合わせて関係図を表示すること

これらの要件を詳しく順番に確認していく。

### システムの上で読書ができること

この要件を設定した理由は主に２点存在する。1点目は読書における可視化の効果を高めるためである。読書をするスペースと可視化の画面が別れている場合、小説の本文と可視化を同時に確認することは難しく、可視化を見ることが負担になってしまう可能性がある。そのため読書スペースと可視化を同じシステム上で表示することでユーザーに積極的に可視化を活用してもらう。２点目は(N2)で定義した、情報の追加にかかる負担を削減するためである。読書の進度に合わせた可視化を行う上で「現在どこのページを読んでいるのか」や「登場人物や関係性がどこのページで出てきたか」などのページ数に関する情報は非常に重要である。しかしユーザーが読書を進めるたびにそれらの情報を提示してもらうことはあまり現実的ではない。そこでシステム上で読書をしてもらうことで自動的に現在のページ数を管理し、情報を追加してもらう際にも自動でページ数の情報を補足する。これらによってユーザーのシステム利用にかかる負担を削減する。以上がこの要件を設定した理由である。

### 小説に関する重要な情報を手軽に追加できること

２章において、小説における登場人物や関係性の認識は非常に曖昧であり機械による自動抽出が難しいことを議論した。そのため本研究では機械で抽出した情報を人間の手で修正し、小説の理解に適した登場人物と関係のリストを作成する手法を提案した。その手法を実現するためにシステムには**小説の本文から情報を自動抽出する**機能と**人間による情報追加を可能にする**機能の２つの機能が必要である。この機能を実装する上で最も重視すべき事項はこの機能がユーザーによって使いやすい機能であるかという点である。本研究の目的は**読書を円滑にする**ことであるため、情報の追加に手間取り読書を停滞させることは本意ではない。そのためなるべく少ない手順で情報を追加できるように機能の詳細を決定していく。

### 情報を後から編集できること

この機能は**謝った情報を入力した**とき、**機械による自動抽出にミスが存在した**とき、**読書が進むうちに情報が変化した**時などにおこる問題を解決するために必要である。システムを手動で操作したり、アルゴリズムで情報を自動抽出する時にミスが起こらないと考えることはできない。しかし誤った情報をそのまま保存しておくと映し出された人物相関図も誤った情報を含み、人物相関図を見ることで読解を阻害する可能性がある。そのため誤りを見つけた際には即座に修正できる必要がある。加えて小説は途中で情報が補完される場合がある。例えばユースケースにおいて序盤に出てきた「背の高い少女」は後に「ジナイーダ」という名前であることが判明した。名前が明かされた後、人物相関図における人名を表示を「背の高い少女」ではなく「ジナイーダ」に変えたいと思う場面も出てくるはずだ。そのためこの場合にもすでに入力した情報を修正できる必要がある。以上の理由から**情報を後から修正できること**をシステムの要件として設定した。その要件を達成するためにも、情報を追加するときと同様にユーザーが情報を修正しやすいような画面の配置、機能の設計が重要である。

### 小説の進行度に合わせて関係図を表示すること

この要件は（P1)と(P3)を達成するために非常に重要であり、この４つの中で最も大切な要件である。この節では可視化において対象となるデータと想定される動作や動機について考える。今回可視化に使用データは**小説の本文**と**登場人物のリスト**と**人物関係のリスト**と**人物間の関係のリスト**と**登場人物のページごとの出現回数**である。登場人物は**名前**という属性をもち、人物間の関係は**誰から**、**誰への**、**どんな関係**、**好感度の値**という属性をもち、両方共通で初めて登場したページ数を持つ。次にユースケースをもとに想定される動作を考える。ユースケースでは主に登場人物を追加するとき、内容を思い出すとき、特定の人物を思い出すとき、情報を修正するとき、二人で感想を話すときにシステム上で情報を確認していた。各シチュエーションにおいて必要な可視化要件を考える。登場人物を追加するときには**機械によって抽出された単語の一覧**と**それらの単語が文中のどこに出てきたのかの表示**が必要である。内容を思い出すときや二人で感想を話すときには**関係の全体像を確認できること**、**人物と人物の間の関係が確認できること**、**1番重要な人物を見つけられること**、**時系列によって変化する関係図が眺められる**などがあげられる。特定の人物を思い出すときにはその人に関する情報を収集するために**人物を出てくる時間や関係する人物によって絞り込むことができる**,**特定の人物と関連する人物だけを取り出せる**,**特定の人物が登場するページを見つけられる**などの絞り込み機能が必要である。情報を修正するときは(N3)に関わってくるが、**現在の人物間の情報の一覧が確認できる**ことが必要である。これらの細かい要件をもとに人物相関図など様々な可視化を実現する。

本章では簡単な実験をもとに、小目標を設定した。加えてその小目標をもとに提案手法の概観を紹介し、ユースケースからシステムの要件を設定した。４章においては実際のシステムについて詳しく説明を行う。
